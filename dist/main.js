!function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t){document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("searchField"),t=document.getElementById("searchButton"),o=document.getElementById("loading"),n=document.getElementById("books");let r=0,i=0,l=10;const c=(e,t="")=>{let o=document.createElement("div");o.innerHTML=`<h2 class="books__comm ${t}">${e}</h2>`,n.appendChild(o)},s=e=>{let{title:t,description:o}=e.volumeInfo;o=(o=o||"No description available").length<200?o:`${o.substr(0,o.indexOf(" ",200))}...`;let{thumbnail:r}=e.volumeInfo.imageLinks?e.volumeInfo.imageLinks:"";r=r||"./img/placeholder.png";let i=document.createElement("div");i.classList.add("book"),i.innerHTML=`<img src="${r}" class="book__cover"/> <h2 class="book__title">${t}</h2><p class="book__description">${o}</p>`,n.appendChild(i)},a=()=>{n.offsetHeight-window.innerHeight+50===document.documentElement.scrollTop&&d()},d=()=>{let t=e.value.length>0?e.value:"empty space";fetch(`https://www.googleapis.com/books/v1/volumes?q=intitle:${t}&maxResults=${l}&fields=totalItems,items(volumeInfo/title,volumeInfo/description,volumeInfo/imageLinks/thumbnail)`).then(e=>200===e.status?e.json():Promise.reject(e)).then(e=>{i=e.totalItems,o.classList.add("container__loader--hidden"),i>0?(bookList=e.items,bookList.forEach(s),l<10&&(c("End of Search"),document.removeEventListener("scroll",a)),l=i-10*(r+=1)<10?i-10*r:10):c("No results found.")}).catch(e=>{o.classList.add("container__loader--hidden"),404===e.status?c("404 Error: incorrect url","books__comm--error"):500===e.status?c("500 Error: Server error","books__comm--error"):400===e.status?c("400 Error: Invalid field selection","books__comm--error"):c("Unspecified error occured.","books__comm--error")})};t.addEventListener("click",function(){n.innerHTML="",l=10,r=0,(()=>{if(!/[\\\@\:\?\!\&\£\$\#\~\<\>\^\=\;\(\)\{\}\[\]]+/gi.test(e.value))return!0;c("Invalid character. The following characters are invalid:  @ : ? ! & £ $ # ~ < > ^ = ; ( ) { } [ ] ","books__comm--error")})()&&(o.classList.remove("container__loader--hidden"),document.addEventListener("scroll",a),d())}),e.addEventListener("keyup",function(e){13===e.keyCode&&(e.preventDefault(),t.click())})})}]);